<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Infinite Stories</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <main class="app">
    <div class="feed">
      {% if not video_srcs %}
        <section class="page">
          <div class="caption-safe">
            <h1 class="caption-title">No videos yet</h1>
            <p class="caption-sub">Add .mp4 files to <code>webapp/static/video/</code> and refresh.</p>
          </div>
        </section>
      {% else %}
        {% for src in video_srcs %}
          <section class="page" data-card-id="card-{{ loop.index }}">
            <video class="fullscreen-video"
                   {% if loop.first %}
                     src="{{ src }}" preload="auto"
                   {% else %}
                     data-src="{{ src }}" preload="none"
                   {% endif %}
                   muted loop playsinline></video>

            <div class="actions">
              <!-- Like -->
              <button class="icon-btn likeBtn" aria-label="Like">
                <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                  <path class="likeIconPath"
                        d="M12 21s-6.716-4.278-9.428-7.428C-.143 11.429-.34 7.659 2.343 5.343 4.1 3.7 6.9 3.9 8.657 5.657L12 9l3.343-3.343c1.757-1.757 4.557-1.957 6.314-.314 2.683 2.316 2.486 6.086-.229 8.229C18.716 16.722 12 21 12 21z"
                        stroke="#fff" stroke-width="1.6" fill="none" />
                </svg>
              </button>
              <div class="counter likeCount">0</div>

              <!-- Comments -->
              <button class="icon-btn commentBtn" aria-label="Comments">
                <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M21 6a3 3 0 0 0-3-3H6a3 3 0 0 0-3 3v9a3 3 0 0 0 3 3h2v4l5.333-4H18a3 3 0 0 0 3-3V6z" fill="#fff"/>
                </svg>
              </button>
              <div class="counter commentCount">0</div>

              <!-- Save -->
              <button class="icon-btn saveBtn" aria-label="Save">
                <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                  <path class="saveIconPath"
                        d="M6 2h12a2 2 0 0 1 2 2v18l-8-4-8 4V4a2 2 0 0 1 2-2z"
                        stroke="#fff" stroke-width="1.6" fill="none" />
                </svg>
              </button>

              <!-- Share -->
              <button class="icon-btn shareBtn" aria-label="Share">
                <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M13 5l7 7-7 7v-4H6v-6h7V5z" fill="#fff"/>
                </svg>
              </button>
            </div>

            <div class="caption-safe">
              <h1 class="caption-title">Card {{ loop.index }}</h1>
              <p class="caption-sub">Now playing: {{ src.split('/')[-1] }}</p>
            </div>
          </section>
        {% endfor %}
      {% endif %}
    </div>
    <button class="next-btn" id="nextBtn" type="button">Next ▾</button>
  </main>

  <!-- Comments sheet (shared) -->
  <div class="sheet-backdrop" id="sheetBackdrop"></div>
  <div class="sheet" id="commentsSheet" aria-hidden="true" role="dialog" aria-label="Comments">
    <div class="sheet-header">
      <div class="sheet-title" id="commentsTitle">Comments</div>
      <button class="sheet-close" id="closeComments">Close</button>
    </div>
    <div class="sheet-body" id="commentsList"></div>
  </div>
  <div class="input-bar" id="inputBar">
    <input class="input" id="commentInput" type="text" placeholder="Add a comment…" />
    <button class="send-btn" id="sendComment">Send</button>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
